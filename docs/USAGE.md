# 使い方ガイド

## 基本操作

### 拡張機能の有効化

1. 拡張機能のポップアップを開きます
2. 画面上部のトグルスイッチで拡張機能を ON にします
3. OFF にすると，すべてのショートカットキーが無効になります

### 履歴ナビゲーション

1. 対応する AI チャットサイト（ChatGPT，Claude，Perplexity など）を開きます
2. プロンプト入力フィールドにフォーカスを当てます
3. **Alt+↑** を押すと過去のプロンプトが呼び出されます
4. **Alt+↓** で新しいプロンプトへ移動します
5. トースト通知で現在位置（例: 3/10）が表示されます

### 履歴の動作

- 履歴はページ上に表示されているプロンプトから自動的に取得されます
- 最新のプロンプトから順に遡ることができます
- 元の入力に戻るには，最新まで進むか，通常のキー入力を行います
- ページをリロードするとナビゲーション状態がリセットされます

## カスタマイズ

### ショートカットキーの変更

1. 拡張機能のポップアップを開きます
2. 「設定」タブをクリック
3. 「カスタムショートカットを設定」ボタンをクリック
4. `chrome://extensions/shortcuts` が開きます
5. 「Prompt History Recall」の項目で好きなキーに変更できます

**注意**: カスタムキーを設定すると，デフォルトキー（Alt+↑/↓）は自動的に無効化されます

### トースト通知の ON/OFF

1. 拡張機能のポップアップを開きます
2. 「設定」タブをクリック
3. 「トースト通知を表示する」のスイッチで ON/OFF 切り替え

トースト通知を無効にすると，履歴ナビゲーション時の位置表示が非表示になります

### サイトごとの有効/無効設定

1. 拡張機能のポップアップを開きます
2. 「設定」タブをクリック
3. 「対応サイトごとの有効/無効」セクションで各サイトのスイッチを ON/OFF

特定のサイトでのみ機能を無効にしたい場合に便利です

## 対応サイト

- ChatGPT (https://chat.openai.com, https://chatgpt.com)
- Claude (https://claude.ai)
- Perplexity (https://perplexity.ai)
- Microsoft Copilot (https://copilot.microsoft.com)
- Grok (https://x.com/i/grok)
- Notion AI (https://notion.so)

## トラブルシューティング

### キーが反応しない

**原因 1**: 拡張機能が無効になっている

- 解決策: ポップアップを開き，画面上部のトグルスイッチを ON にしてください

**原因 2**: 入力フィールドにフォーカスが当たっていない

- 解決策: プロンプト入力欄をクリックしてフォーカスを当ててください

**原因 3**: カスタムキーとデフォルトキーが競合している

- 解決策: `chrome://extensions/shortcuts` でどちらか一方のみ設定してください

**原因 4**: サイトが無効化されている

- 解決策: ポップアップの設定タブで該当サイトを有効にしてください

### 履歴が取得できない

**原因 1**: ページをリロードしたばかり

- 解決策: ページ上にプロンプト履歴が表示されているか確認してください

**原因 2**: サイトの DOM 構造が変更された

- 解決策: 拡張機能の更新を確認するか，Issue を報告してください

### トースト通知が表示されない

**原因 1**: トースト通知が無効になっている

- 解決策: ポップアップの設定タブでトースト通知を有効にしてください

**原因 2**: 履歴が空

- 解決策: ページ上にプロンプト履歴があることを確認してください

## 制限事項

- 履歴はページ上に表示されているプロンプトのみ取得できます
- ページをリロードするとナビゲーション状態がリセットされます
- ローカルストレージには保存されません（DOM 要素から直接取得）
- 各サイトの DOM 構造変更により動作しなくなる可能性があります

## プライバシーとセキュリティ

- プロンプト履歴はローカルストレージに保存されません
- ページの DOM 要素から直接取得するため，外部への送信は一切ありません
- 設定情報のみ chrome.storage.local に保存されます
- ネットワーク通信は行いません
